<!DOCTYPE html>

<html lang="en">

<head>
    <title>yit</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="https://wzrd.in/standalone/buffer"></script>
    <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js"
            integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB"
            crossorigin="anonymous">
    </script>
</head>

<body class="container">

<h1>Create Profile</h1>

<div class="table-responsive">
    <table class="table table-bordered">
        <tbody>
        <tr>
            <td>Name</td>
            <td><input type="text" id="profileNameTextId" /></td>
        </tr>
        <tr>
            <td>Skills</td>
            <td>
                <div class="checkbox">
                    <label><input type="checkbox" id="checkBoxJavaId" value="0">Java</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="checkBoxJsId" value="1">JavaScript</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="checkBoxMySQLId" value="2">MySQL</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="checkBoxMongoId" value="3">Mongo</label>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <br>

    <form action="/">
        <fieldset>
            <legend>Upload</legend>
            <input type="file" name="photo" id="photo">
            <button type="button" onclick="upload()">Upload CV</button>
        </fieldset>
    </form>
    <a id="cvHashId"></a>

    <br><br><br>



</div>

<script type="text/javascript">

    function upload() {
        const reader = new FileReader();
        reader.onloadend = function() {
            const ipfs = window.IpfsApi('localhost', 5001); // Connect to IPFS
            const buf = buffer.Buffer(reader.result); // Convert data into buffer
            ipfs.files.add(buf, (err, result) => { // Upload buffer to IPFS
                if(err) {
                    console.error(err);
                    return
                }
                let cvHash = result[0].hash;
                console.log(`cvHash: ${cvHash}`);
                $("#cvHashId").text(cvHash);
            })
        };
        const photo = document.getElementById("photo");
        reader.readAsArrayBuffer(photo.files[0]); // Read Provided File
    }

</script>

<a href="#" id="registerProfileButtonId" class="btn btn-primary">Create</a>

<br><br><br>

<h1>View Profile</h1>

<div class="table-responsive">
    <table class="table table-bordered">
        <tbody>
        <tr>
            <td>Profile Id</td>
            <td><input type="text" id="profileIdTextId"/></td>
        </tr>
        </tbody>
    </table>
</div>

<a href="#" id="viewProfileButtonId" class="btn btn-primary">View</a>

<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Employee Code</th>
            <th>Profile Name</th>
            <th>Skills</th>
            <th>CV hash</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="retrievedProfileEmployeeCodeTextId">code</td>
            <td id="retrievedProfileNameTextId">name</td>
            <td id="retrievedProfileSkillsTextId">skills</td>
            <td id="retrievedProfileCvHashTextId">cv hash</td>
            <td id="retrievedProfileStatusTextId">status</td>
        </tr>
        </tbody>
    </table>
</div>

<h1>Find Profiles</h1>

<div class="table-responsive">
    <table class="table table-bordered">
        <tbody>
        <tr>
            <td>Job Id</td>
            <td><input type="text" id="jobIdTextId" /></td>
        </tr>
        </tbody>
    </table>
</div>

<a href="#" id="findEmployeeProfilesByJobButtonId" class="btn btn-primary">Find</a>

<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Employee Profile Ids</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="retrievedProfileIds">profile ids</td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/web3.min.js"></script>
<script src="js/truffle-contract.js"></script>
<script src="js/app.js"></script>

</body>

</html>
