<!DOCTYPE html>

<html lang="en">

<head>
    <title>yit</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="https://wzrd.in/standalone/buffer"></script>
    <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js"
            integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB"
            crossorigin="anonymous">
    </script>
</head>

<body class="container">
  <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand">Blockchain-JobMarket</a>
        </div>
        <ul class="nav navbar-nav">
          <li class="active"><a href="index.html">Home</a></li>
          <li class="active"><a href="searchJob.html">Search Job</a></li>
          <li><a href="viewProfile.html">ViewProfile</a></li>
          <li><a href="#">List All Jobs</a></li>
        </ul>
      </div>
    </nav>
<center><img id="loader" style="width:40px;height:40px;" src="https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif"></center>
<div id="progress" class="alert alert-success" >
    <strong>Your details were successfully updated!</strong>
</div>

    <h1>Create Profile</h1>

    <div class="table-responsive">
        <table class="table table-bordered">
            <tbody>
            <tr>
                <td>Name</td>
                <td><input type="text" id="profileNameTextId" /></td>
            </tr>
            <tr>
                <td>Skills</td>
                <td>
                    <div class="checkbox">
                        <label><input type="checkbox" id="checkBoxJavaId" value="0">Java</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" id="checkBoxJsId" value="1">JavaScript</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" id="checkBoxMySQLId" value="2">MySQL</label>
                    </div>
                    <div class="checkbox">
                        <label><input type="checkbox" id="checkBoxMongoId" value="3">Mongo</label>
                    </div>
                </td>
            </tr>

                    <tr>
                        <td>CV</td>
                        <td>
                            <form action="/">
                                <fieldset>
                                    <input type="file" name="cvInputName" id="cvInputId">
                                    <button type="button" onclick="upload()">Upload CV</button>
                                </fieldset>
                            </form>
                            <a id="cvHashId"></a>
                        </td>
                    </tr>
                    <tr>
                        <td>Default Profile</td>
                        <td><input type="checkbox" id="defaultProfileCheckId" value="3"></td>
                    </tr>

            </tbody>
        </table>
    </div>

    <a href="#" id="registerProfileButtonId" class="btn btn-primary">Create</a>

    <br><br><br>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="lib/bootstrap.min.js"></script>
<script src="lib/web3.min.js"></script>
<script src="lib/truffle-contract.js"></script>
<script src="js/app.js"></script>
<script src="js/employee.js"></script>

<script type="text/javascript">

    function upload() {
        console.log("Upload");
        const reader = new FileReader();
        const cv = document.getElementById("cvInputId");
        reader.readAsArrayBuffer(cv.files[0]); // Read Provided File
        reader.onloadend = function() {
            const ipfs = window.IpfsApi('localhost', 5001); // Connect to IPFS
            const buf = buffer.Buffer(reader.result); // Convert data into buffer
            ipfs.files.add(buf, (err, result) => { // Upload buffer to IPFS
                if(err) {
                    console.error(err);
                    return
                }
                let cvHash = result[0].hash;
                console.log(`cvHash: ${cvHash}`);
                $("#cvHashId").text(cvHash);
            })
        };
    }

</script>

</body>

</html>
